<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>まきちゃんの冒険 - 超簡単版</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #ffb3d9, #ffe6f2);
            font-family: 'Comic Sans MS', cursive;
        }
        .maze-cell {
            width: 80px;
            height: 80px;
            border: 3px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .path {
            background-color: #fff8dc;
        }
        .wall {
            background-color: #8b4513;
        }
        .player {
            background-color: #ffb6c1;
            box-shadow: 0 0 20px #ff69b4;
        }
        .goal {
            background-color: #ffd700;
            box-shadow: 0 0 20px #ffa500;
        }
        .hint-path {
            background-color: #98fb98;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .btn-big {
            font-size: 20px;
            padding: 15px 30px;
            border-radius: 15px;
            transition: all 0.3s ease;
        }
        .btn-big:hover {
            transform: scale(1.05);
        }
        .celebration {
            animation: bounce 0.5s ease-in-out;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-4xl mx-auto">
        <!-- タイトル -->
        <div class="text-center mb-6">
            <h1 class="text-4xl font-bold text-pink-600 mb-2">🌸 まきちゃんの冒険 - 超簡単版 🌸</h1>
            <p class="text-xl text-purple-600">誰でも確実にクリアできる優しい迷路だよ！</p>
        </div>

        <!-- ゲーム情報 -->
        <div class="bg-white bg-opacity-80 rounded-lg p-4 mb-6">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div class="bg-pink-100 rounded-lg p-3">
                    <p class="text-sm text-gray-600">レベル</p>
                    <p class="text-2xl font-bold text-pink-600" id="level">1</p>
                </div>
                <div class="bg-blue-100 rounded-lg p-3">
                    <p class="text-sm text-gray-600">歩数</p>
                    <p class="text-2xl font-bold text-blue-600" id="steps">0</p>
                </div>
                <div class="bg-green-100 rounded-lg p-3">
                    <p class="text-sm text-gray-600">ゴールまで</p>
                    <p class="text-2xl font-bold text-green-600" id="distance">2歩</p>
                </div>
                <div class="bg-yellow-100 rounded-lg p-3">
                    <p class="text-sm text-gray-600">状態</p>
                    <p class="text-lg font-bold text-yellow-600" id="status">がんばって！</p>
                </div>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- 迷路エリア -->
            <div class="bg-white bg-opacity-90 rounded-lg p-6">
                <h2 class="text-2xl font-bold text-center mb-4 text-purple-600">🗺️ 迷路</h2>
                <div class="flex justify-center mb-4">
                    <div id="maze" class="grid grid-cols-3 gap-1">
                        <!-- 迷路はJavaScriptで生成 -->
                    </div>
                </div>
                
                <!-- 移動ボタン -->
                <div class="grid grid-cols-3 gap-2 max-w-xs mx-auto">
                    <div></div>
                    <button id="btn-up" class="btn-big bg-blue-500 hover:bg-blue-600 text-white">↑</button>
                    <div></div>
                    <button id="btn-left" class="btn-big bg-blue-500 hover:bg-blue-600 text-white">←</button>
                    <div class="flex items-center justify-center">
                        <span class="text-2xl">🌸</span>
                    </div>
                    <button id="btn-right" class="btn-big bg-blue-500 hover:bg-blue-600 text-white">→</button>
                    <div></div>
                    <button id="btn-down" class="btn-big bg-blue-500 hover:bg-blue-600 text-white">↓</button>
                    <div></div>
                </div>
            </div>

            <!-- コントロールパネル -->
            <div class="space-y-4">
                <!-- ヘルプボタン -->
                <div class="bg-white bg-opacity-90 rounded-lg p-4">
                    <h3 class="text-xl font-bold mb-3 text-purple-600">🆘 困ったときは</h3>
                    <div class="grid grid-cols-1 gap-2">
                        <button id="btn-hint" class="btn-big bg-green-500 hover:bg-green-600 text-white">💡 次はどこ？</button>
                        <button id="btn-auto" class="btn-big bg-orange-500 hover:bg-orange-600 text-white">🚗 自動でゴール</button>
                        <button id="btn-reset" class="btn-big bg-gray-500 hover:bg-gray-600 text-white">🔄 リセット</button>
                    </div>
                </div>

                <!-- メッセージエリア -->
                <div class="bg-white bg-opacity-90 rounded-lg p-4">
                    <h3 class="text-xl font-bold mb-3 text-purple-600">💬 メッセージ</h3>
                    <div id="message" class="text-lg p-3 bg-yellow-100 rounded-lg text-center font-bold">
                        まきちゃんを👑ゴールまで案内してね！
                    </div>
                </div>
            </div>
        </div>

        <!-- まきちゃんアクションボタン -->
        <div class="bg-white bg-opacity-90 rounded-lg p-6 mt-6">
            <h2 class="text-2xl font-bold text-center mb-4 text-purple-600">🌸 まきちゃんアクション 🌸</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <button class="action-btn btn-big bg-pink-400 hover:bg-pink-500 text-white" data-action="いい子まきちゃん">😇 いい子</button>
                <button class="action-btn btn-big bg-red-400 hover:bg-red-500 text-white" data-action="悪い子まきちゃん">😈 悪い子</button>
                <button class="action-btn btn-big bg-blue-400 hover:bg-blue-500 text-white" data-action="お手伝いまきちゃん">🧹 お手伝い</button>
                <button class="action-btn btn-big bg-green-400 hover:bg-green-500 text-white" data-action="お片付けまきちゃん">📦 お片付け</button>
                <button class="action-btn btn-big bg-purple-400 hover:bg-purple-500 text-white" data-action="動画鑑賞まきちゃん">📺 動画鑑賞</button>
                <button class="action-btn btn-big bg-yellow-400 hover:bg-yellow-500 text-white" data-action="おやつタイムまきちゃん">🍪 おやつ</button>
                <button class="action-btn btn-big bg-indigo-400 hover:bg-indigo-500 text-white" data-action="お昼寝まきちゃん">😴 お昼寝</button>
                <button class="action-btn btn-big bg-teal-400 hover:bg-teal-500 text-white" data-action="お散歩まきちゃん">🚶‍♀️ お散歩</button>
            </div>
        </div>

        <!-- 操作説明 -->
        <div class="bg-white bg-opacity-90 rounded-lg p-4 mt-6">
            <h3 class="text-xl font-bold mb-3 text-purple-600">📖 操作方法</h3>
            <div class="text-lg space-y-2">
                <p>✨ <strong>移動：</strong>青い矢印ボタンをクリック</p>
                <p>✨ <strong>ヒント：</strong>「次はどこ？」ボタンで方向を教えてもらう</p>
                <p>✨ <strong>自動：</strong>「自動でゴール」ボタンで自動的にクリア</p>
                <p>✨ <strong>音声：</strong>音量を上げて音声ガイドを楽しもう</p>
            </div>
        </div>
    </div>

    <script>
        // ゲーム状態
        let gameState = {
            level: 1,
            playerX: 0,
            playerY: 0,
            goalX: 2,
            goalY: 2,
            steps: 0,
            mazeSize: 3,
            completed: false
        };

        // 超簡単な迷路パターン（レベル別）
        const mazePatterns = {
            1: [
                [1, 1, 0],
                [0, 1, 0],
                [0, 1, 1]
            ],
            2: [
                [1, 1, 1],
                [0, 0, 1],
                [0, 0, 1]
            ],
            3: [
                [1, 0, 1, 0],
                [1, 1, 1, 0],
                [0, 0, 1, 0],
                [0, 0, 1, 1]
            ]
        };

        // 音声合成の初期化
        let synth = window.speechSynthesis;

        function speak(text) {
            if (synth) {
                let utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ja-JP';
                utterance.rate = 0.8;
                utterance.pitch = 1.2;
                synth.speak(utterance);
            }
        }

        // 迷路を描画
        function renderMaze() {
            const mazeElement = document.getElementById('maze');
            const pattern = mazePatterns[gameState.level] || mazePatterns[1];
            const size = pattern.length;
            
            mazeElement.innerHTML = '';
            mazeElement.className = `grid grid-cols-${size} gap-1`;
            
            for (let y = 0; y < size; y++) {
                for (let x = 0; x < size; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'maze-cell';
                    
                    if (pattern[y][x] === 0) {
                        cell.className += ' wall';
                        cell.textContent = '🧱';
                    } else {
                        cell.className += ' path';
                        
                        if (x === gameState.playerX && y === gameState.playerY) {
                            cell.className += ' player';
                            cell.textContent = '🌸';
                        } else if (x === gameState.goalX && y === gameState.goalY) {
                            cell.className += ' goal';
                            cell.textContent = '👑';
                        }
                    }
                }
            }
        }

        // プレイヤーの移動
        function movePlayer(dx, dy) {
            const newX = gameState.playerX + dx;
            const newY = gameState.playerY + dy;
            const pattern = mazePatterns[gameState.level] || mazePatterns[1];
            
            // 境界チェック
            if (newX < 0 || newX >= pattern[0].length || newY < 0 || newY >= pattern.length) {
                showMessage('そっちには行けないよ！', 'error');
                speak('そっちには行けません');
                return;
            }
            
            // 壁チェック
            if (pattern[newY][newX] === 0) {
                showMessage('壁があるよ！別の道を探してみて！', 'error');
                speak('壁があります。別の道を探してください');
                return;
            }
            
            // 移動実行
            gameState.playerX = newX;
            gameState.playerY = newY;
            gameState.steps++;
            
            updateGameInfo();
            renderMaze();
            
            // ゴール判定
            if (newX === gameState.goalX && newY === gameState.goalY) {
                gameCompleted();
            } else {
                const distance = Math.abs(newX - gameState.goalX) + Math.abs(newY - gameState.goalY);
                showMessage(`いいね！ゴールまであと${distance}歩だよ！`, 'success');
                speak(`いいですね！ゴールまであと${distance}歩です`);
            }
        }

        // ゲーム情報の更新
        function updateGameInfo() {
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('steps').textContent = gameState.steps;
            const distance = Math.abs(gameState.playerX - gameState.goalX) + Math.abs(gameState.playerY - gameState.goalY);
            document.getElementById('distance').textContent = distance + '歩';
            
            if (distance === 0) {
                document.getElementById('status').textContent = 'クリア！';
            } else if (distance === 1) {
                document.getElementById('status').textContent = 'もう少し！';
            } else {
                document.getElementById('status').textContent = 'がんばって！';
            }
        }

        // メッセージ表示
        function showMessage(text, type = 'info') {
            const messageElement = document.getElementById('message');
            messageElement.textContent = text;
            messageElement.className = `text-lg p-3 rounded-lg text-center font-bold ${
                type === 'success' ? 'bg-green-100 text-green-800' :
                type === 'error' ? 'bg-red-100 text-red-800' :
                'bg-yellow-100 text-yellow-800'
            }`;
            
            if (type === 'success') {
                messageElement.classList.add('celebration');
                setTimeout(() => messageElement.classList.remove('celebration'), 1000);
            }
        }

        // ゲームクリア
        function gameCompleted() {
            gameState.completed = true;
            showMessage('🎉 やったね！まきちゃんがゴールに到着したよ！🎉', 'success');
            speak('やったー！まきちゃんがゴールに到着しました！おめでとうございます！');
            
            // 花火エフェクト（簡易版）
            document.body.style.background = 'linear-gradient(135deg, #ff6b9d, #feca57, #48dbfb, #ff9ff3)';
            setTimeout(() => {
                document.body.style.background = 'linear-gradient(135deg, #ffb3d9, #ffe6f2)';
            }, 3000);
            
            // 次のレベルへの案内
            setTimeout(() => {
                if (gameState.level < 3) {
                    if (confirm('次のレベルに挑戦する？')) {
                        nextLevel();
                    }
                } else {
                    showMessage('全レベルクリア！まきちゃんアクションを楽しんでね！', 'success');
                }
            }, 2000);
        }

        // 次のレベル
        function nextLevel() {
            gameState.level++;
            gameState.playerX = 0;
            gameState.playerY = 0;
            gameState.steps = 0;
            gameState.completed = false;
            
            const pattern = mazePatterns[gameState.level];
            if (pattern) {
                gameState.goalX = pattern[0].length - 1;
                gameState.goalY = pattern.length - 1;
                updateGameInfo();
                renderMaze();
                showMessage(`レベル${gameState.level}に挑戦！`, 'info');
                speak(`レベル${gameState.level}に挑戦しましょう`);
            }
        }

        // ヒント機能
        function showHint() {
            const dx = gameState.goalX - gameState.playerX;
            const dy = gameState.goalY - gameState.playerY;
            
            let direction = '';
            let arrow = '';
            
            if (Math.abs(dx) > Math.abs(dy)) {
                if (dx > 0) {
                    direction = '右';
                    arrow = '→';
                } else {
                    direction = '左';
                    arrow = '←';
                }
            } else {
                if (dy > 0) {
                    direction = '下';
                    arrow = '↓';
                } else {
                    direction = '上';
                    arrow = '↑';
                }
            }
            
            showMessage(`${arrow} ${direction}に進んでみて！`, 'info');
            speak(`${direction}に進んでください`);
            
            // 道筋をハイライト
            highlightPath();
        }

        // 道筋ハイライト
        function highlightPath() {
            const cells = document.querySelectorAll('.maze-cell.path');
            cells.forEach(cell => {
                if (!cell.classList.contains('player') && !cell.classList.contains('goal')) {
                    cell.classList.add('hint-path');
                    setTimeout(() => cell.classList.remove('hint-path'), 2000);
                }
            });
        }

        // 自動ゴール
        function autoGoal() {
            showMessage('自動でゴールまで案内するね！', 'info');
            speak('自動でゴールまで案内します');
            
            const interval = setInterval(() => {
                const dx = gameState.goalX - gameState.playerX;
                const dy = gameState.goalY - gameState.playerY;
                
                if (dx === 0 && dy === 0) {
                    clearInterval(interval);
                    return;
                }
                
                if (Math.abs(dx) > Math.abs(dy)) {
                    movePlayer(dx > 0 ? 1 : -1, 0);
                } else {
                    movePlayer(0, dy > 0 ? 1 : -1);
                }
            }, 800);
        }

        // ゲームリセット
        function resetGame() {
            gameState.playerX = 0;
            gameState.playerY = 0;
            gameState.steps = 0;
            gameState.completed = false;
            
            updateGameInfo();
            renderMaze();
            showMessage('新しいゲームを始めるよ！', 'info');
            speak('新しいゲームを始めましょう');
        }

        // まきちゃんアクション
        function makiAction(action) {
            const messages = {
                'いい子まきちゃん': 'まきちゃんがとってもいい子になりました！えらいね！',
                '悪い子まきちゃん': 'まきちゃんがちょっといたずらしちゃった！かわいいね！',
                'お手伝いまきちゃん': 'まきちゃんがお手伝いをしてくれました！ありがとう！',
                'お片付けまきちゃん': 'まきちゃんがお片付けをしました！きれいになったね！',
                '動画鑑賞まきちゃん': 'まきちゃんが楽しそうに動画を見ています！',
                'おやつタイムまきちゃん': 'まきちゃんが美味しそうにおやつを食べています！',
                'お昼寝まきちゃん': 'まきちゃんがぐっすりお昼寝しています！かわいい寝顔！',
                'お散歩まきちゃん': 'まきちゃんが元気にお散歩に出かけました！'
            };
            
            const message = messages[action] || 'まきちゃんが何かをしています！';
            showMessage(message, 'success');
            speak(message);
        }

        // イベントリスナー
        document.getElementById('btn-up').addEventListener('click', () => movePlayer(0, -1));
        document.getElementById('btn-down').addEventListener('click', () => movePlayer(0, 1));
        document.getElementById('btn-left').addEventListener('click', () => movePlayer(-1, 0));
        document.getElementById('btn-right').addEventListener('click', () => movePlayer(1, 0));
        
        document.getElementById('btn-hint').addEventListener('click', showHint);
        document.getElementById('btn-auto').addEventListener('click', autoGoal);
        document.getElementById('btn-reset').addEventListener('click', resetGame);
        
        document.querySelectorAll('.action-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                makiAction(e.target.dataset.action);
            });
        });

        // キーボード操作
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    e.preventDefault();
                    movePlayer(0, -1);
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    e.preventDefault();
                    movePlayer(0, 1);
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    e.preventDefault();
                    movePlayer(-1, 0);
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    e.preventDefault();
                    movePlayer(1, 0);
                    break;
                case ' ':
                    e.preventDefault();
                    showHint();
                    break;
            }
        });

        // ゲーム初期化
        updateGameInfo();
        renderMaze();
        speak('まきちゃんの冒険へようこそ！まきちゃんをゴールまで案内してください');
    </script>
</body>
</html>



