<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã¾ãã¡ã‚ƒã‚“ã®å†’é™º - è¶…ç°¡å˜ç‰ˆ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #ffb3d9, #ffe6f2);
            font-family: 'Comic Sans MS', cursive;
        }
        .maze-cell {
            width: 80px;
            height: 80px;
            border: 3px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .path {
            background-color: #fff8dc;
        }
        .wall {
            background-color: #8b4513;
        }
        .player {
            background-color: #ffb6c1;
            box-shadow: 0 0 20px #ff69b4;
        }
        .goal {
            background-color: #ffd700;
            box-shadow: 0 0 20px #ffa500;
        }
        .hint-path {
            background-color: #98fb98;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .btn-big {
            font-size: 20px;
            padding: 15px 30px;
            border-radius: 15px;
            transition: all 0.3s ease;
        }
        .btn-big:hover {
            transform: scale(1.05);
        }
        .celebration {
            animation: bounce 0.5s ease-in-out;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-4xl mx-auto">
        <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
        <div class="text-center mb-6">
            <h1 class="text-4xl font-bold text-pink-600 mb-2">ğŸŒ¸ ã¾ãã¡ã‚ƒã‚“ã®å†’é™º - è¶…ç°¡å˜ç‰ˆ ğŸŒ¸</h1>
            <p class="text-xl text-purple-600">èª°ã§ã‚‚ç¢ºå®Ÿã«ã‚¯ãƒªã‚¢ã§ãã‚‹å„ªã—ã„è¿·è·¯ã ã‚ˆï¼</p>
        </div>

        <!-- ã‚²ãƒ¼ãƒ æƒ…å ± -->
        <div class="bg-white bg-opacity-80 rounded-lg p-4 mb-6">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div class="bg-pink-100 rounded-lg p-3">
                    <p class="text-sm text-gray-600">ãƒ¬ãƒ™ãƒ«</p>
                    <p class="text-2xl font-bold text-pink-600" id="level">1</p>
                </div>
                <div class="bg-blue-100 rounded-lg p-3">
                    <p class="text-sm text-gray-600">æ­©æ•°</p>
                    <p class="text-2xl font-bold text-blue-600" id="steps">0</p>
                </div>
                <div class="bg-green-100 rounded-lg p-3">
                    <p class="text-sm text-gray-600">ã‚´ãƒ¼ãƒ«ã¾ã§</p>
                    <p class="text-2xl font-bold text-green-600" id="distance">2æ­©</p>
                </div>
                <div class="bg-yellow-100 rounded-lg p-3">
                    <p class="text-sm text-gray-600">çŠ¶æ…‹</p>
                    <p class="text-lg font-bold text-yellow-600" id="status">ãŒã‚“ã°ã£ã¦ï¼</p>
                </div>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- è¿·è·¯ã‚¨ãƒªã‚¢ -->
            <div class="bg-white bg-opacity-90 rounded-lg p-6">
                <h2 class="text-2xl font-bold text-center mb-4 text-purple-600">ğŸ—ºï¸ è¿·è·¯</h2>
                <div class="flex justify-center mb-4">
                    <div id="maze" class="grid grid-cols-3 gap-1">
                        <!-- è¿·è·¯ã¯JavaScriptã§ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- ç§»å‹•ãƒœã‚¿ãƒ³ -->
                <div class="grid grid-cols-3 gap-2 max-w-xs mx-auto">
                    <div></div>
                    <button id="btn-up" class="btn-big bg-blue-500 hover:bg-blue-600 text-white">â†‘</button>
                    <div></div>
                    <button id="btn-left" class="btn-big bg-blue-500 hover:bg-blue-600 text-white">â†</button>
                    <div class="flex items-center justify-center">
                        <span class="text-2xl">ğŸŒ¸</span>
                    </div>
                    <button id="btn-right" class="btn-big bg-blue-500 hover:bg-blue-600 text-white">â†’</button>
                    <div></div>
                    <button id="btn-down" class="btn-big bg-blue-500 hover:bg-blue-600 text-white">â†“</button>
                    <div></div>
                </div>
            </div>

            <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
            <div class="space-y-4">
                <!-- ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³ -->
                <div class="bg-white bg-opacity-90 rounded-lg p-4">
                    <h3 class="text-xl font-bold mb-3 text-purple-600">ğŸ†˜ å›°ã£ãŸã¨ãã¯</h3>
                    <div class="grid grid-cols-1 gap-2">
                        <button id="btn-hint" class="btn-big bg-green-500 hover:bg-green-600 text-white">ğŸ’¡ æ¬¡ã¯ã©ã“ï¼Ÿ</button>
                        <button id="btn-auto" class="btn-big bg-orange-500 hover:bg-orange-600 text-white">ğŸš— è‡ªå‹•ã§ã‚´ãƒ¼ãƒ«</button>
                        <button id="btn-reset" class="btn-big bg-gray-500 hover:bg-gray-600 text-white">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
                    </div>
                </div>

                <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ -->
                <div class="bg-white bg-opacity-90 rounded-lg p-4">
                    <h3 class="text-xl font-bold mb-3 text-purple-600">ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
                    <div id="message" class="text-lg p-3 bg-yellow-100 rounded-lg text-center font-bold">
                        ã¾ãã¡ã‚ƒã‚“ã‚’ğŸ‘‘ã‚´ãƒ¼ãƒ«ã¾ã§æ¡ˆå†…ã—ã¦ã­ï¼
                    </div>
                </div>
            </div>
        </div>

        <!-- ã¾ãã¡ã‚ƒã‚“ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
        <div class="bg-white bg-opacity-90 rounded-lg p-6 mt-6">
            <h2 class="text-2xl font-bold text-center mb-4 text-purple-600">ğŸŒ¸ ã¾ãã¡ã‚ƒã‚“ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ ğŸŒ¸</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <button class="action-btn btn-big bg-pink-400 hover:bg-pink-500 text-white" data-action="ã„ã„å­ã¾ãã¡ã‚ƒã‚“">ğŸ˜‡ ã„ã„å­</button>
                <button class="action-btn btn-big bg-red-400 hover:bg-red-500 text-white" data-action="æ‚ªã„å­ã¾ãã¡ã‚ƒã‚“">ğŸ˜ˆ æ‚ªã„å­</button>
                <button class="action-btn btn-big bg-blue-400 hover:bg-blue-500 text-white" data-action="ãŠæ‰‹ä¼ã„ã¾ãã¡ã‚ƒã‚“">ğŸ§¹ ãŠæ‰‹ä¼ã„</button>
                <button class="action-btn btn-big bg-green-400 hover:bg-green-500 text-white" data-action="ãŠç‰‡ä»˜ã‘ã¾ãã¡ã‚ƒã‚“">ğŸ“¦ ãŠç‰‡ä»˜ã‘</button>
                <button class="action-btn btn-big bg-purple-400 hover:bg-purple-500 text-white" data-action="å‹•ç”»é‘‘è³ã¾ãã¡ã‚ƒã‚“">ğŸ“º å‹•ç”»é‘‘è³</button>
                <button class="action-btn btn-big bg-yellow-400 hover:bg-yellow-500 text-white" data-action="ãŠã‚„ã¤ã‚¿ã‚¤ãƒ ã¾ãã¡ã‚ƒã‚“">ğŸª ãŠã‚„ã¤</button>
                <button class="action-btn btn-big bg-indigo-400 hover:bg-indigo-500 text-white" data-action="ãŠæ˜¼å¯ã¾ãã¡ã‚ƒã‚“">ğŸ˜´ ãŠæ˜¼å¯</button>
                <button class="action-btn btn-big bg-teal-400 hover:bg-teal-500 text-white" data-action="ãŠæ•£æ­©ã¾ãã¡ã‚ƒã‚“">ğŸš¶â€â™€ï¸ ãŠæ•£æ­©</button>
            </div>
        </div>

        <!-- æ“ä½œèª¬æ˜ -->
        <div class="bg-white bg-opacity-90 rounded-lg p-4 mt-6">
            <h3 class="text-xl font-bold mb-3 text-purple-600">ğŸ“– æ“ä½œæ–¹æ³•</h3>
            <div class="text-lg space-y-2">
                <p>âœ¨ <strong>ç§»å‹•ï¼š</strong>é’ã„çŸ¢å°ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p>
                <p>âœ¨ <strong>ãƒ’ãƒ³ãƒˆï¼š</strong>ã€Œæ¬¡ã¯ã©ã“ï¼Ÿã€ãƒœã‚¿ãƒ³ã§æ–¹å‘ã‚’æ•™ãˆã¦ã‚‚ã‚‰ã†</p>
                <p>âœ¨ <strong>è‡ªå‹•ï¼š</strong>ã€Œè‡ªå‹•ã§ã‚´ãƒ¼ãƒ«ã€ãƒœã‚¿ãƒ³ã§è‡ªå‹•çš„ã«ã‚¯ãƒªã‚¢</p>
                <p>âœ¨ <strong>éŸ³å£°ï¼š</strong>éŸ³é‡ã‚’ä¸Šã’ã¦éŸ³å£°ã‚¬ã‚¤ãƒ‰ã‚’æ¥½ã—ã‚‚ã†</p>
            </div>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        let gameState = {
            level: 1,
            playerX: 0,
            playerY: 0,
            goalX: 2,
            goalY: 2,
            steps: 0,
            mazeSize: 3,
            completed: false
        };

        // è¶…ç°¡å˜ãªè¿·è·¯ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆãƒ¬ãƒ™ãƒ«åˆ¥ï¼‰
        const mazePatterns = {
            1: [
                [1, 1, 0],
                [0, 1, 0],
                [0, 1, 1]
            ],
            2: [
                [1, 1, 1],
                [0, 0, 1],
                [0, 0, 1]
            ],
            3: [
                [1, 0, 1, 0],
                [1, 1, 1, 0],
                [0, 0, 1, 0],
                [0, 0, 1, 1]
            ]
        };

        // éŸ³å£°åˆæˆã®åˆæœŸåŒ–
        let synth = window.speechSynthesis;

        function speak(text) {
            if (synth) {
                let utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ja-JP';
                utterance.rate = 0.8;
                utterance.pitch = 1.2;
                synth.speak(utterance);
            }
        }

        // è¿·è·¯ã‚’æç”»
        function renderMaze() {
            const mazeElement = document.getElementById('maze');
            const pattern = mazePatterns[gameState.level] || mazePatterns[1];
            const size = pattern.length;
            
            mazeElement.innerHTML = '';
            mazeElement.className = `grid grid-cols-${size} gap-1`;
            
            for (let y = 0; y < size; y++) {
                for (let x = 0; x < size; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'maze-cell';
                    
                    if (pattern[y][x] === 0) {
                        cell.className += ' wall';
                        cell.textContent = 'ğŸ§±';
                    } else {
                        cell.className += ' path';
                        
                        if (x === gameState.playerX && y === gameState.playerY) {
                            cell.className += ' player';
                            cell.textContent = 'ğŸŒ¸';
                        } else if (x === gameState.goalX && y === gameState.goalY) {
                            cell.className += ' goal';
                            cell.textContent = 'ğŸ‘‘';
                        }
                    }
                }
            }
        }

        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç§»å‹•
        function movePlayer(dx, dy) {
            const newX = gameState.playerX + dx;
            const newY = gameState.playerY + dy;
            const pattern = mazePatterns[gameState.level] || mazePatterns[1];
            
            // å¢ƒç•Œãƒã‚§ãƒƒã‚¯
            if (newX < 0 || newX >= pattern[0].length || newY < 0 || newY >= pattern.length) {
                showMessage('ãã£ã¡ã«ã¯è¡Œã‘ãªã„ã‚ˆï¼', 'error');
                speak('ãã£ã¡ã«ã¯è¡Œã‘ã¾ã›ã‚“');
                return;
            }
            
            // å£ãƒã‚§ãƒƒã‚¯
            if (pattern[newY][newX] === 0) {
                showMessage('å£ãŒã‚ã‚‹ã‚ˆï¼åˆ¥ã®é“ã‚’æ¢ã—ã¦ã¿ã¦ï¼', 'error');
                speak('å£ãŒã‚ã‚Šã¾ã™ã€‚åˆ¥ã®é“ã‚’æ¢ã—ã¦ãã ã•ã„');
                return;
            }
            
            // ç§»å‹•å®Ÿè¡Œ
            gameState.playerX = newX;
            gameState.playerY = newY;
            gameState.steps++;
            
            updateGameInfo();
            renderMaze();
            
            // ã‚´ãƒ¼ãƒ«åˆ¤å®š
            if (newX === gameState.goalX && newY === gameState.goalY) {
                gameCompleted();
            } else {
                const distance = Math.abs(newX - gameState.goalX) + Math.abs(newY - gameState.goalY);
                showMessage(`ã„ã„ã­ï¼ã‚´ãƒ¼ãƒ«ã¾ã§ã‚ã¨${distance}æ­©ã ã‚ˆï¼`, 'success');
                speak(`ã„ã„ã§ã™ã­ï¼ã‚´ãƒ¼ãƒ«ã¾ã§ã‚ã¨${distance}æ­©ã§ã™`);
            }
        }

        // ã‚²ãƒ¼ãƒ æƒ…å ±ã®æ›´æ–°
        function updateGameInfo() {
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('steps').textContent = gameState.steps;
            const distance = Math.abs(gameState.playerX - gameState.goalX) + Math.abs(gameState.playerY - gameState.goalY);
            document.getElementById('distance').textContent = distance + 'æ­©';
            
            if (distance === 0) {
                document.getElementById('status').textContent = 'ã‚¯ãƒªã‚¢ï¼';
            } else if (distance === 1) {
                document.getElementById('status').textContent = 'ã‚‚ã†å°‘ã—ï¼';
            } else {
                document.getElementById('status').textContent = 'ãŒã‚“ã°ã£ã¦ï¼';
            }
        }

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        function showMessage(text, type = 'info') {
            const messageElement = document.getElementById('message');
            messageElement.textContent = text;
            messageElement.className = `text-lg p-3 rounded-lg text-center font-bold ${
                type === 'success' ? 'bg-green-100 text-green-800' :
                type === 'error' ? 'bg-red-100 text-red-800' :
                'bg-yellow-100 text-yellow-800'
            }`;
            
            if (type === 'success') {
                messageElement.classList.add('celebration');
                setTimeout(() => messageElement.classList.remove('celebration'), 1000);
            }
        }

        // ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢
        function gameCompleted() {
            gameState.completed = true;
            showMessage('ğŸ‰ ã‚„ã£ãŸã­ï¼ã¾ãã¡ã‚ƒã‚“ãŒã‚´ãƒ¼ãƒ«ã«åˆ°ç€ã—ãŸã‚ˆï¼ğŸ‰', 'success');
            speak('ã‚„ã£ãŸãƒ¼ï¼ã¾ãã¡ã‚ƒã‚“ãŒã‚´ãƒ¼ãƒ«ã«åˆ°ç€ã—ã¾ã—ãŸï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼');
            
            // èŠ±ç«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆç°¡æ˜“ç‰ˆï¼‰
            document.body.style.background = 'linear-gradient(135deg, #ff6b9d, #feca57, #48dbfb, #ff9ff3)';
            setTimeout(() => {
                document.body.style.background = 'linear-gradient(135deg, #ffb3d9, #ffe6f2)';
            }, 3000);
            
            // æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¸ã®æ¡ˆå†…
            setTimeout(() => {
                if (gameState.level < 3) {
                    if (confirm('æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã«æŒ‘æˆ¦ã™ã‚‹ï¼Ÿ')) {
                        nextLevel();
                    }
                } else {
                    showMessage('å…¨ãƒ¬ãƒ™ãƒ«ã‚¯ãƒªã‚¢ï¼ã¾ãã¡ã‚ƒã‚“ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¥½ã—ã‚“ã§ã­ï¼', 'success');
                }
            }, 2000);
        }

        // æ¬¡ã®ãƒ¬ãƒ™ãƒ«
        function nextLevel() {
            gameState.level++;
            gameState.playerX = 0;
            gameState.playerY = 0;
            gameState.steps = 0;
            gameState.completed = false;
            
            const pattern = mazePatterns[gameState.level];
            if (pattern) {
                gameState.goalX = pattern[0].length - 1;
                gameState.goalY = pattern.length - 1;
                updateGameInfo();
                renderMaze();
                showMessage(`ãƒ¬ãƒ™ãƒ«${gameState.level}ã«æŒ‘æˆ¦ï¼`, 'info');
                speak(`ãƒ¬ãƒ™ãƒ«${gameState.level}ã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†`);
            }
        }

        // ãƒ’ãƒ³ãƒˆæ©Ÿèƒ½
        function showHint() {
            const dx = gameState.goalX - gameState.playerX;
            const dy = gameState.goalY - gameState.playerY;
            
            let direction = '';
            let arrow = '';
            
            if (Math.abs(dx) > Math.abs(dy)) {
                if (dx > 0) {
                    direction = 'å³';
                    arrow = 'â†’';
                } else {
                    direction = 'å·¦';
                    arrow = 'â†';
                }
            } else {
                if (dy > 0) {
                    direction = 'ä¸‹';
                    arrow = 'â†“';
                } else {
                    direction = 'ä¸Š';
                    arrow = 'â†‘';
                }
            }
            
            showMessage(`${arrow} ${direction}ã«é€²ã‚“ã§ã¿ã¦ï¼`, 'info');
            speak(`${direction}ã«é€²ã‚“ã§ãã ã•ã„`);
            
            // é“ç­‹ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            highlightPath();
        }

        // é“ç­‹ãƒã‚¤ãƒ©ã‚¤ãƒˆ
        function highlightPath() {
            const cells = document.querySelectorAll('.maze-cell.path');
            cells.forEach(cell => {
                if (!cell.classList.contains('player') && !cell.classList.contains('goal')) {
                    cell.classList.add('hint-path');
                    setTimeout(() => cell.classList.remove('hint-path'), 2000);
                }
            });
        }

        // è‡ªå‹•ã‚´ãƒ¼ãƒ«
        function autoGoal() {
            showMessage('è‡ªå‹•ã§ã‚´ãƒ¼ãƒ«ã¾ã§æ¡ˆå†…ã™ã‚‹ã­ï¼', 'info');
            speak('è‡ªå‹•ã§ã‚´ãƒ¼ãƒ«ã¾ã§æ¡ˆå†…ã—ã¾ã™');
            
            const interval = setInterval(() => {
                const dx = gameState.goalX - gameState.playerX;
                const dy = gameState.goalY - gameState.playerY;
                
                if (dx === 0 && dy === 0) {
                    clearInterval(interval);
                    return;
                }
                
                if (Math.abs(dx) > Math.abs(dy)) {
                    movePlayer(dx > 0 ? 1 : -1, 0);
                } else {
                    movePlayer(0, dy > 0 ? 1 : -1);
                }
            }, 800);
        }

        // ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
        function resetGame() {
            gameState.playerX = 0;
            gameState.playerY = 0;
            gameState.steps = 0;
            gameState.completed = false;
            
            updateGameInfo();
            renderMaze();
            showMessage('æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’å§‹ã‚ã‚‹ã‚ˆï¼', 'info');
            speak('æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’å§‹ã‚ã¾ã—ã‚‡ã†');
        }

        // ã¾ãã¡ã‚ƒã‚“ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
        function makiAction(action) {
            const messages = {
                'ã„ã„å­ã¾ãã¡ã‚ƒã‚“': 'ã¾ãã¡ã‚ƒã‚“ãŒã¨ã£ã¦ã‚‚ã„ã„å­ã«ãªã‚Šã¾ã—ãŸï¼ãˆã‚‰ã„ã­ï¼',
                'æ‚ªã„å­ã¾ãã¡ã‚ƒã‚“': 'ã¾ãã¡ã‚ƒã‚“ãŒã¡ã‚‡ã£ã¨ã„ãŸãšã‚‰ã—ã¡ã‚ƒã£ãŸï¼ã‹ã‚ã„ã„ã­ï¼',
                'ãŠæ‰‹ä¼ã„ã¾ãã¡ã‚ƒã‚“': 'ã¾ãã¡ã‚ƒã‚“ãŒãŠæ‰‹ä¼ã„ã‚’ã—ã¦ãã‚Œã¾ã—ãŸï¼ã‚ã‚ŠãŒã¨ã†ï¼',
                'ãŠç‰‡ä»˜ã‘ã¾ãã¡ã‚ƒã‚“': 'ã¾ãã¡ã‚ƒã‚“ãŒãŠç‰‡ä»˜ã‘ã‚’ã—ã¾ã—ãŸï¼ãã‚Œã„ã«ãªã£ãŸã­ï¼',
                'å‹•ç”»é‘‘è³ã¾ãã¡ã‚ƒã‚“': 'ã¾ãã¡ã‚ƒã‚“ãŒæ¥½ã—ãã†ã«å‹•ç”»ã‚’è¦‹ã¦ã„ã¾ã™ï¼',
                'ãŠã‚„ã¤ã‚¿ã‚¤ãƒ ã¾ãã¡ã‚ƒã‚“': 'ã¾ãã¡ã‚ƒã‚“ãŒç¾å‘³ã—ãã†ã«ãŠã‚„ã¤ã‚’é£Ÿã¹ã¦ã„ã¾ã™ï¼',
                'ãŠæ˜¼å¯ã¾ãã¡ã‚ƒã‚“': 'ã¾ãã¡ã‚ƒã‚“ãŒãã£ã™ã‚ŠãŠæ˜¼å¯ã—ã¦ã„ã¾ã™ï¼ã‹ã‚ã„ã„å¯é¡”ï¼',
                'ãŠæ•£æ­©ã¾ãã¡ã‚ƒã‚“': 'ã¾ãã¡ã‚ƒã‚“ãŒå…ƒæ°—ã«ãŠæ•£æ­©ã«å‡ºã‹ã‘ã¾ã—ãŸï¼'
            };
            
            const message = messages[action] || 'ã¾ãã¡ã‚ƒã‚“ãŒä½•ã‹ã‚’ã—ã¦ã„ã¾ã™ï¼';
            showMessage(message, 'success');
            speak(message);
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('btn-up').addEventListener('click', () => movePlayer(0, -1));
        document.getElementById('btn-down').addEventListener('click', () => movePlayer(0, 1));
        document.getElementById('btn-left').addEventListener('click', () => movePlayer(-1, 0));
        document.getElementById('btn-right').addEventListener('click', () => movePlayer(1, 0));
        
        document.getElementById('btn-hint').addEventListener('click', showHint);
        document.getElementById('btn-auto').addEventListener('click', autoGoal);
        document.getElementById('btn-reset').addEventListener('click', resetGame);
        
        document.querySelectorAll('.action-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                makiAction(e.target.dataset.action);
            });
        });

        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    e.preventDefault();
                    movePlayer(0, -1);
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    e.preventDefault();
                    movePlayer(0, 1);
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    e.preventDefault();
                    movePlayer(-1, 0);
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    e.preventDefault();
                    movePlayer(1, 0);
                    break;
                case ' ':
                    e.preventDefault();
                    showHint();
                    break;
            }
        });

        // ã‚²ãƒ¼ãƒ åˆæœŸåŒ–
        updateGameInfo();
        renderMaze();
        speak('ã¾ãã¡ã‚ƒã‚“ã®å†’é™ºã¸ã‚ˆã†ã“ãï¼ã¾ãã¡ã‚ƒã‚“ã‚’ã‚´ãƒ¼ãƒ«ã¾ã§æ¡ˆå†…ã—ã¦ãã ã•ã„');
    </script>
</body>
</html>



